<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Template Editor | OpenWeb Starter</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-background font-sans text-text">
    
    <!-- Header -->
    <header class="bg-card shadow-sm border-b border-border">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="index.html" class="text-xl font-bold text-heading flex items-center">
                <i class="fas fa-code text-accent mr-2"></i>
                <span>OpenWeb Starter</span>
            </a>
            
            <div class="hidden md:flex space-x-4 items-center">
                <button id="save-btn" class="bg-secondary text-white py-2 px-4 rounded-lg hover:bg-secondary/80 transition-colors font-medium">
                    <i class="fas fa-save mr-2"></i>Save
                </button>
                <button id="download-btn" class="bg-primary text-white py-2 px-4 rounded-lg hover:bg-primaryHover transition-colors font-medium">
                    <i class="fas fa-download mr-2"></i>Download
                </button>
                <a href="index.html" class="text-subtle hover:text-primary transition-colors font-medium">
                    <i class="fas fa-home mr-2"></i>Home
                </a>
                <a href="about.html" class="text-subtle hover:text-primary transition-colors font-medium">About</a>
                <a href="services.html" class="text-subtle hover:text-primary transition-colors font-medium">Services</a>
                <a href="pricing.html" class="text-subtle hover:text-primary transition-colors font-medium">Pricing</a>
                <a href="contact.html" class="text-subtle hover:text-primary transition-colors font-medium">Contact</a>
            </div>
            
            <!-- Mobile Menu Button -->
            <button id="mobile-menu-btn" class="md:hidden p-2 rounded-md text-subtle hover:bg-gray-100 focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                </svg>
            </button>
        </nav>
        
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="md:hidden bg-white border-t border-border hidden">
            <div class="px-6 py-4 space-y-2">
                <a href="index.html" class="block py-2 text-subtle hover:text-primary">Home</a>
                <a href="about.html" class="block py-2 text-subtle hover:text-primary">About</a>
                <a href="services.html" class="block py-2 text-subtle hover:text-primary">Services</a>
                <a href="pricing.html" class="block py-2 text-subtle hover:text-primary">Pricing</a>
                <a href="contact.html" class="block py-2 text-subtle hover:text-primary">Contact</a>
                <div class="pt-2 border-t border-border">
                    <button id="mobile-save-btn" class="w-full mb-2 bg-secondary text-white py-2 px-4 rounded-lg font-medium">
                        <i class="fas fa-save mr-2"></i>Save
                    </button>
                    <button id="mobile-download-btn" class="w-full bg-primary text-white py-2 px-4 rounded-lg font-medium">
                        <i class="fas fa-download mr-2"></i>Download
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main class="flex flex-col h-screen">
        <!-- Template Selection -->
        <div id="template-selector" class="bg-card border-b border-border p-6">
            <div class="container mx-auto">
                <h2 class="text-2xl font-bold text-heading mb-4">Choose Your Template</h2>
                <div class="grid md:grid-cols-3 gap-4">
                    <button class="template-option bg-white border-2 border-border rounded-lg p-4 text-left hover:border-primary transition-colors" data-template="portfolio">
                        <div class="flex items-center mb-3">
                            <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mr-3">
                                <i class="fas fa-user text-primary text-xl"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold text-heading">Portfolio</h3>
                                <p class="text-sm text-subtle">Personal portfolio showcase</p>
                            </div>
                        </div>
                        <p class="text-sm text-subtle">Perfect for designers, developers, and creatives to showcase their work and skills.</p>
                    </button>
                    
                    <button class="template-option bg-white border-2 border-border rounded-lg p-4 text-left hover:border-primary transition-colors" data-template="resume">
                        <div class="flex items-center mb-3">
                            <div class="w-12 h-12 bg-secondary/10 rounded-lg flex items-center justify-center mr-3">
                                <i class="fas fa-file-alt text-secondary text-xl"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold text-heading">Resume</h3>
                                <p class="text-sm text-subtle">Professional CV layout</p>
                            </div>
                        </div>
                        <p class="text-sm text-subtle">Clean and professional resume template with sections for experience, education, and skills.</p>
                    </button>
                    
                    <button class="template-option bg-white border-2 border-border rounded-lg p-4 text-left hover:border-primary transition-colors" data-template="landing">
                        <div class="flex items-center mb-3">
                            <div class="w-12 h-12 bg-accent/10 rounded-lg flex items-center justify-center mr-3">
                                <i class="fas fa-rocket text-accent text-xl"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold text-heading">Landing Page</h3>
                                <p class="text-sm text-subtle">Marketing focused page</p>
                            </div>
                        </div>
                        <p class="text-sm text-subtle">Professional landing page template for products, services, or personal branding.</p>
                    </button>
                </div>
            </div>
        </div>

        <!-- Editor Interface -->
        <div id="editor-interface" class="flex-1 flex overflow-hidden" style="display: none;">
            <!-- Code Editor Panel -->
            <div class="w-1/2 bg-gray-900 text-white flex flex-col">
                <div class="bg-gray-800 px-4 py-3 border-b border-gray-700 flex items-center justify-between">
                    <h3 class="font-medium">Code Editor</h3>
                    <div class="flex items-center space-x-2">
                        <span id="template-name" class="text-sm text-gray-400"></span>
                        <button id="reset-btn" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fas fa-undo text-sm"></i>
                        </button>
                    </div>
                </div>
                <div class="flex-1 overflow-hidden">
                    <textarea id="code-editor" class="w-full h-full p-4 bg-gray-900 text-white resize-none outline-none font-mono text-sm leading-relaxed"></textarea>
                </div>
            </div>

            <!-- Preview Panel -->
            <div class="w-1/2 bg-white flex flex-col border-l border-border">
                <div class="bg-gray-50 px-4 py-3 border-b border-border flex items-center justify-between">
                    <h3 class="font-medium text-heading">Live Preview</h3>
                    <div class="flex items-center space-x-2">
                        <button id="refresh-preview" class="text-gray-500 hover:text-gray-700 transition-colors">
                            <i class="fas fa-sync-alt text-sm"></i>
                        </button>
                        <div class="flex border border-gray-300 rounded overflow-hidden">
                            <button id="desktop-view" class="px-3 py-1 bg-primary text-white text-sm">
                                <i class="fas fa-desktop"></i>
                            </button>
                            <button id="mobile-view" class="px-3 py-1 bg-gray-200 text-gray-700 text-sm">
                                <i class="fas fa-mobile-alt"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="flex-1 overflow-hidden">
                    <iframe id="preview-frame" class="w-full h-full border-none"></iframe>
                </div>
            </div>
        </div>
    </main>

    <!-- Success Modal -->
    <div id="success-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
            <div class="text-center">
                <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-check text-green-500 text-2xl"></i>
                </div>
                <h3 class="text-lg font-semibold mb-2">Success!</h3>
                <p class="text-gray-600 mb-4">Your website has been saved successfully.</p>
                <button id="close-modal" class="bg-primary text-white py-2 px-4 rounded-lg hover:bg-primaryHover transition-colors">
                    Close
                </button>
            </div>
        </div>
    </div>

    <script>
        class ProfessionalTemplateEditor {
            constructor() {
                this.currentTemplate = null;
                this.originalCode = '';
                this.initializeTemplates();
                this.setupEventListeners();
                this.setupMobileMenu();
            }

            setupMobileMenu() {
                const mobileMenuBtn = document.getElementById('mobile-menu-btn');
                const mobileMenu = document.getElementById('mobile-menu');
                
                if (mobileMenuBtn && mobileMenu) {
                    mobileMenuBtn.addEventListener('click', () => {
                        mobileMenu.classList.toggle('hidden');
                    });
                }
                
                // Mobile save and download buttons
                document.getElementById('mobile-save-btn')?.addEventListener('click', () => this.saveProject());
                document.getElementById('mobile-download-btn')?.addEventListener('click', () => this.downloadProject());
            }

            initializeTemplates() {
                this.templates = {
                    portfolio: {
                        name: 'Portfolio Template',
                        code: `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>John Doe - Portfolio</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; line-height: 1.6; color: #333; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 4rem 0; text-align: center; }
        .profile-img { width: 150px; height: 150px; border-radius: 50%; margin: 0 auto 2rem; background: rgba(255,255,255,0.1); display: flex; align-items: center; justify-content: center; font-size: 3rem; }
        h1 { font-size: 3rem; margin-bottom: 1rem; }
        .subtitle { font-size: 1.2rem; opacity: 0.9; }
        .section { padding: 4rem 0; }
        .section:nth-child(even) { background: #f8f9fa; }
        h2 { font-size: 2.5rem; text-align: center; margin-bottom: 3rem; color: #667eea; }
        .projects { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; }
        .project { background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); transition: transform 0.3s; }
        .project:hover { transform: translateY(-5px); }
        .skills { display: flex; flex-wrap: wrap; gap: 1rem; justify-content: center; margin-top: 2rem; }
        .skill { background: #667eea; color: white; padding: 0.5rem 1rem; border-radius: 25px; font-size: 0.9rem; }
        .contact { text-align: center; background: #333; color: white; }
        .contact a { color: #667eea; text-decoration: none; }
        .contact a:hover { text-decoration: underline; }
        @media (max-width: 768px) {
            h1 { font-size: 2rem; }
            h2 { font-size: 1.8rem; }
            .profile-img { width: 120px; height: 120px; font-size: 2rem; }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="profile-img">👨‍💻</div>
            <h1>John Doe</h1>
            <p class="subtitle">Full Stack Developer & Designer</p>
        </div>
    </header>

    <section class="section">
        <div class="container">
            <h2>About Me</h2>
            <p style="text-align: center; max-width: 600px; margin: 0 auto; font-size: 1.1rem;">
                I'm a passionate developer with 5 years of experience creating beautiful and functional web applications. 
                I love turning ideas into reality through code and design.
            </p>
            <div class="skills">
                <span class="skill">JavaScript</span>
                <span class="skill">React</span>
                <span class="skill">Node.js</span>
                <span class="skill">Python</span>
                <span class="skill">UI/UX Design</span>
                <span class="skill">MongoDB</span>
            </div>
        </div>
    </section>

    <section class="section">
        <div class="container">
            <h2>My Projects</h2>
            <div class="projects">
                <div class="project">
                    <h3>E-Commerce Platform</h3>
                    <p>A full-featured online store built with React and Node.js. Features include user authentication, payment processing, and inventory management.</p>
                </div>
                <div class="project">
                    <h3>Task Management App</h3>
                    <p>A collaborative project management tool with real-time updates, file sharing, and team communication features.</p>
                </div>
                <div class="project">
                    <h3>Weather Dashboard</h3>
                    <p>A responsive weather application with location-based forecasts, interactive maps, and weather alerts.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="section contact">
        <div class="container">
            <h2>Get In Touch</h2>
            <p>Ready to work together? Let's create something amazing!</p>
            <p style="margin-top: 2rem;">
                Email: <a href="mailto:john@example.com">john@example.com</a><br>
                Phone: <a href="tel:+1234567890">+1 (234) 567-890</a><br>
                LinkedIn: <a href="https://linkedin.com/in/johndoe" target="_blank">linkedin.com/in/johndoe</a>
            </p>
        </div>
    </section>
</body>
</html>`
                    },
                    resume: {
                        name: 'Resume Template',
                        code: `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>John Doe - Resume</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; line-height: 1.6; color: #333; background: #f4f4f4; }
        .resume { max-width: 800px; margin: 2rem auto; background: white; box-shadow: 0 0 20px rgba(0,0,0,0.1); }
        .header { background: #2c3e50; color: white; padding: 2rem; text-align: center; }
        .header h1 { font-size: 2.5rem; margin-bottom: 0.5rem; }
        .header p { font-size: 1.1rem; opacity: 0.9; }
        .contact-info { display: flex; justify-content: center; gap: 2rem; margin-top: 1rem; flex-wrap: wrap; }
        .contact-info span { font-size: 0.9rem; }
        .content { padding: 2rem; }
        .section { margin-bottom: 2rem; }
        .section h2 { color: #2c3e50; border-bottom: 2px solid #3498db; padding-bottom: 0.5rem; margin-bottom: 1rem; }
        .experience-item { margin-bottom: 1.5rem; }
        .experience-item h3 { color: #2c3e50; margin-bottom: 0.25rem; }
        .experience-item .company { color: #3498db; font-weight: 600; }
        .experience-item .date { color: #666; font-size: 0.9rem; margin-bottom: 0.5rem; }
        .skills-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; }
        .skill-item { background: #ecf0f1; padding: 0.5rem; text-align: center; border-radius: 5px; }
        @media (max-width: 768px) {
            .header h1 { font-size: 2rem; }
            .contact-info { flex-direction: column; gap: 0.5rem; }
        }
    </style>
</head>
<body>
    <div class="resume">
        <div class="header">
            <h1>John Doe</h1>
            <p>Senior Full Stack Developer</p>
            <div class="contact-info">
                <span>📧 john@example.com</span>
                <span>📱 +1 (234) 567-890</span>
                <span>📍 San Francisco, CA</span>
                <span>💼 linkedin.com/in/johndoe</span>
            </div>
        </div>

        <div class="content">
            <div class="section">
                <h2>Professional Summary</h2>
                <p>Experienced Full Stack Developer with 5+ years of expertise in building scalable web applications. 
                Proficient in modern JavaScript frameworks, backend technologies, and cloud platforms. 
                Passionate about creating efficient, user-friendly solutions that drive business growth.</p>
            </div>

            <div class="section">
                <h2>Work Experience</h2>
                <div class="experience-item">
                    <h3>Senior Full Stack Developer</h3>
                    <div class="company">Tech Solutions Inc.</div>
                    <div class="date">January 2021 - Present</div>
                    <ul>
                        <li>Led development of customer-facing web applications serving 100k+ users</li>
                        <li>Implemented microservices architecture reducing system downtime by 40%</li>
                        <li>Mentored junior developers and conducted code reviews</li>
                    </ul>
                </div>
                <div class="experience-item">
                    <h3>Full Stack Developer</h3>
                    <div class="company">Digital Innovations LLC</div>
                    <div class="date">June 2019 - December 2020</div>
                    <ul>
                        <li>Developed responsive web applications using React and Node.js</li>
                        <li>Collaborated with UX/UI team to implement pixel-perfect designs</li>
                        <li>Optimized database queries improving application performance by 60%</li>
                    </ul>
                </div>
            </div>

            <div class="section">
                <h2>Education</h2>
                <div class="experience-item">
                    <h3>Bachelor of Science in Computer Science</h3>
                    <div class="company">University of Technology</div>
                    <div class="date">2015 - 2019</div>
                </div>
            </div>

            <div class="section">
                <h2>Technical Skills</h2>
                <div class="skills-grid">
                    <div class="skill-item">JavaScript</div>
                    <div class="skill-item">React</div>
                    <div class="skill-item">Node.js</div>
                    <div class="skill-item">Python</div>
                    <div class="skill-item">MongoDB</div>
                    <div class="skill-item">PostgreSQL</div>
                    <div class="skill-item">AWS</div>
                    <div class="skill-item">Docker</div>
                </div>
            </div>

            <div class="section">
                <h2>Certifications</h2>
                <ul>
                    <li>AWS Certified Developer - Associate (2022)</li>
                    <li>MongoDB Certified Developer (2021)</li>
                    <li>Google Cloud Professional Developer (2020)</li>
                </ul>
            </div>
        </div>
    </div>
</body>
</html>`
                    },
                    landing: {
                        name: 'Landing Page Template',
                        code: `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Landing Page</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; line-height: 1.6; color: #333; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        header { background: white; box-shadow: 0 2px 5px rgba(0,0,0,0.1); padding: 1rem 0; position: fixed; width: 100%; top: 0; z-index: 1000; }
        nav { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.5rem; font-weight: bold; color: #3498db; }
        .nav-links { display: flex; list-style: none; gap: 2rem; }
        .nav-links a { text-decoration: none; color: #333; font-weight: 500; }
        .hero { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 8rem 0 4rem; text-align: center; margin-top: 70px; }
        .hero h1 { font-size: 3.5rem; margin-bottom: 1rem; }
        .hero p { font-size: 1.2rem; margin-bottom: 2rem; opacity: 0.9; }
        .cta-btn { background: #ff6b6b; color: white; padding: 1rem 2rem; border: none; border-radius: 50px; font-size: 1.1rem; cursor: pointer; transition: transform 0.3s; text-decoration: none; display: inline-block; }
        .cta-btn:hover { transform: translateY(-2px); }
        .features { padding: 4rem 0; background: #f8f9fa; }
        .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin-top: 3rem; }
        .feature { background: white; padding: 2rem; border-radius: 10px; text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .feature-icon { font-size: 3rem; margin-bottom: 1rem; }
        .testimonials { padding: 4rem 0; }
        .testimonial { background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); text-align: center; margin: 2rem 0; }
        .pricing { padding: 4rem 0; background: #f8f9fa; }
        .pricing-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin-top: 3rem; }
        .pricing-card { background: white; padding: 2rem; border-radius: 10px; text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .price { font-size: 3rem; color: #3498db; margin: 1rem 0; }
        footer { background: #333; color: white; text-align: center; padding: 2rem 0; }
        @media (max-width: 768px) {
            .hero h1 { font-size: 2.5rem; }
            .nav-links { display: none; }
        }
    </style>
</head>
<body>
    <header>
        <nav class="container">
            <div class="logo">ProductName</div>
            <ul class="nav-links">
                <li><a href="#features">Features</a></li>
                <li><a href="#pricing">Pricing</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </nav>
    </header>

    <section class="hero">
        <div class="container">
            <h1>Revolutionize Your Workflow</h1>
            <p>The ultimate solution for modern businesses. Increase productivity by 300% with our innovative platform.</p>
            <a href="#contact" class="cta-btn">Start Free Trial</a>
        </div>
    </section>

    <section class="features" id="features">
        <div class="container">
            <h2 style="text-align: center; font-size: 2.5rem; margin-bottom: 1rem;">Why Choose Us?</h2>
            <p style="text-align: center; color: #666; margin-bottom: 2rem;">Everything you need to succeed in one powerful platform</p>
            
            <div class="features-grid">
                <div class="feature">
                    <div class="feature-icon">🚀</div>
                    <h3>Lightning Fast</h3>
                    <p>Experience blazing-fast performance with our optimized infrastructure built for speed.</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">🔒</div>
                    <h3>Secure & Reliable</h3>
                    <p>Bank-level security with 99.9% uptime guarantee. Your data is always safe with us.</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">📱</div>
                    <h3>Mobile Ready</h3>
                    <p>Access your dashboard anywhere, anytime with our responsive mobile-first design.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="testimonials">
        <div class="container">
            <h2 style="text-align: center; font-size: 2.5rem; margin-bottom: 2rem;">What Our Customers Say</h2>
            
            <div class="testimonial">
                <p>"This product has completely transformed how we work. Our team is more productive than ever!"</p>
                <h4 style="margin-top: 1rem; color: #3498db;">- Sarah Johnson, CEO at TechCorp</h4>
            </div>
        </div>
    </section>

    <section class="pricing" id="pricing">
        <div class="container">
            <h2 style="text-align: center; font-size: 2.5rem; margin-bottom: 1rem;">Simple, Transparent Pricing</h2>
            <p style="text-align: center; color: #666; margin-bottom: 2rem;">Choose the plan that fits your needs</p>
            
            <div class="pricing-grid">
                <div class="pricing-card">
                    <h3>Starter</h3>
                    <div class="price">$19<span style="font-size: 1rem;">/month</span></div>
                    <ul style="text-align: left; margin: 1rem 0;">
                        <li>Up to 10 projects</li>
                        <li>Basic support</li>
                        <li>Mobile app access</li>
                    </ul>
                    <a href="#contact" class="cta-btn">Get Started</a>
                </div>
                <div class="pricing-card">
                    <h3>Professional</h3>
                    <div class="price">$49<span style="font-size: 1rem;">/month</span></div>
                    <ul style="text-align: left; margin: 1rem 0;">
                        <li>Unlimited projects</li>
                        <li>Priority support</li>
                        <li>Advanced analytics</li>
                        <li>Team collaboration</li>
                    </ul>
                    <a href="#contact" class="cta-btn">Get Started</a>
                </div>
            </div>
        </div>
    </section>

    <footer id="contact">
        <div class="container">
            <h3>Ready to Get Started?</h3>
            <p>Join thousands of satisfied customers today!</p>
            <p style="margin-top: 1rem;">
                Email: <a href="mailto:hello@productname.com" style="color: #3498db;">hello@productname.com</a><br>
                Phone: <a href="tel:+1234567890" style="color: #3498db;">+1 (234) 567-890</a>
            </p>
        </div>
    </footer>
</body>
</html>`
                    }
                };
            }

            setupEventListeners() {
                // Template selection
                document.querySelectorAll('.template-option').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const templateType = e.currentTarget.dataset.template;
                        this.selectTemplate(templateType);
                    });
                });

                // Code editor events
                const codeEditor = document.getElementById('code-editor');
                if (codeEditor) {
                    codeEditor.addEventListener('input', () => {
                        this.updatePreview();
                    });
                }

                // Button events
                document.getElementById('save-btn')?.addEventListener('click', () => this.saveProject());
                document.getElementById('download-btn')?.addEventListener('click', () => this.downloadProject());
                document.getElementById('reset-btn')?.addEventListener('click', () => this.resetTemplate());
                document.getElementById('refresh-preview')?.addEventListener('click', () => this.updatePreview());
                document.getElementById('close-modal')?.addEventListener('click', () => this.closeModal());

                // View toggle
                document.getElementById('desktop-view')?.addEventListener('click', () => this.setPreviewMode('desktop'));
                document.getElementById('mobile-view')?.addEventListener('click', () => this.setPreviewMode('mobile'));
            }

            selectTemplate(templateType) {
                this.currentTemplate = templateType;
                const template = this.templates[templateType];
                
                if (template) {
                    this.originalCode = template.code;
                    document.getElementById('code-editor').value = template.code;
                    document.getElementById('template-name').textContent = template.name;
                    
                    // Show editor interface
                    document.getElementById('template-selector').style.display = 'none';
                    document.getElementById('editor-interface').style.display = 'flex';
                    
                    // Update preview
                    this.updatePreview();
                }
            }

            updatePreview() {
                const code = document.getElementById('code-editor').value;
                const preview = document.getElementById('preview-frame');
                
                if (preview) {
                    try {
                        const blob = new Blob([code], { type: 'text/html' });
                        const url = URL.createObjectURL(blob);
                        preview.src = url;
                        
                        // Clean up old blob URLs to prevent memory leaks
                        setTimeout(() => URL.revokeObjectURL(url), 1000);
                    } catch (error) {
                        console.error('Error updating preview:', error);
                    }
                }
            }

            saveProject() {
                try {
                    const code = document.getElementById('code-editor').value;
                    const projectData = {
                        template: this.currentTemplate,
                        code: code,
                        timestamp: new Date().toISOString()
                    };
                    
                    localStorage.setItem('openwebstarter_project', JSON.stringify(projectData));
                    this.showSuccessModal();
                } catch (error) {
                    console.error('Error saving project:', error);
                    alert('Error saving project. Please try again.');
                }
            }

            downloadProject() {
                try {
                    const code = document.getElementById('code-editor').value;
                    const blob = new Blob([code], { type: 'text/html' });
                    const url = URL.createObjectURL(blob);
                    
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = \`\${this.currentTemplate || 'website'}.html\`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    
                    // Clean up blob URL
                    setTimeout(() => URL.revokeObjectURL(url), 1000);
                } catch (error) {
                    console.error('Error downloading project:', error);
                    alert('Error downloading project. Please try again.');
                }
            }

            resetTemplate() {
                if (this.originalCode && confirm('Are you sure you want to reset to the original template? This will lose all your changes.')) {
                    document.getElementById('code-editor').value = this.originalCode;
                    this.updatePreview();
                }
            }

            setPreviewMode(mode) {
                const preview = document.getElementById('preview-frame');
                const desktopBtn = document.getElementById('desktop-view');
                const mobileBtn = document.getElementById('mobile-view');
                
                if (mode === 'mobile') {
                    preview.style.width = '375px';
                    preview.style.margin = '0 auto';
                    preview.style.border = '1px solid #ddd';
                    preview.style.borderRadius = '10px';
                    mobileBtn.className = 'px-3 py-1 bg-primary text-white text-sm';
                    desktopBtn.className = 'px-3 py-1 bg-gray-200 text-gray-700 text-sm';
                } else {
                    preview.style.width = '100%';
                    preview.style.margin = '0';
                    preview.style.border = 'none';
                    preview.style.borderRadius = '0';
                    desktopBtn.className = 'px-3 py-1 bg-primary text-white text-sm';
                    mobileBtn.className = 'px-3 py-1 bg-gray-200 text-gray-700 text-sm';
                }
            }

            showSuccessModal() {
                const modal = document.getElementById('success-modal');
                if (modal) {
                    modal.classList.remove('hidden');
                }
            }

            closeModal() {
                const modal = document.getElementById('success-modal');
                if (modal) {
                    modal.classList.add('hidden');
                }
            }
        }

        // Initialize the editor when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            new ProfessionalTemplateEditor();
        });
    </script>
</body>
</html>
